import cv2
import numpy as np

# Read an image
a = cv2.imread('baboon.jpg')

# Resize the image to 256x256
a = cv2.resize(a, (256, 256))

# Random Array
sbox = np.array([
    [123, 131, 87, 199, 57, 165, 157, 47, 172, 132, 205, 139, 203, 116, 97, 146],
    [162, 149, 81, 77, 183, 5, 202, 108, 55, 4, 75, 128, 170, 174, 41, 222],
    [148, 10, 155, 62, 15, 63, 229, 201, 140, 53, 67, 236, 215, 107, 100, 136],
    [239, 32, 211, 69, 198, 89, 42, 35, 160, 135, 30, 184, 210, 253, 96, 25],
    [252, 232, 235, 43, 61, 247, 34, 228, 185, 204, 85, 141, 158, 175, 194, 111],
    [191, 200, 238, 245, 147, 251, 23, 152, 180, 13, 168, 143, 193, 6, 125, 117],
    [83, 197, 177, 106, 98, 79, 166, 224, 231, 169, 50, 218, 178, 124, 119, 206],
    [130, 192, 227, 48, 219, 16, 86, 241, 74, 233, 60, 88, 31, 84, 8, 156],
    [94, 54, 9, 12, 186, 28, 250, 196, 37, 65, 151, 246, 213, 93, 52, 225],
    [255, 101, 137, 127, 92, 216, 189, 38, 26, 164, 159, 33, 248, 36, 113, 45],
    [190, 214, 17, 134, 40, 59, 20, 72, 22, 120, 110, 44, 179, 68, 0, 161],
    [249, 64, 80, 3, 51, 223, 105, 114, 19, 118, 29, 181, 82, 244, 230, 91],
    [243, 2, 39, 121, 240, 11, 58, 182, 109, 90, 122, 221, 173, 78, 138, 209],
    [167, 70, 187, 171, 14, 234, 226, 126, 27, 49, 95, 66, 7, 76, 154, 115],
    [46, 153, 133, 150, 254, 163, 208, 99, 73, 24, 129, 176, 112, 18, 212, 71],
    [237, 102, 242, 21, 207, 103, 144, 1, 220, 145, 104, 195, 188, 217, 142, 56]
])

# Get the dimensions of the image
h, w, c = a.shape

# Iterate over each pixel
for i in range(h):
    for j in range(w):
        for k in range(c):
            binary_pixel = format(a[i, j, k], '08b')
            lsb = binary_pixel[:4]  # LSB
            msb = binary_pixel[4:]  # MSB
            row_index = int(lsb, 2)
            col_index = int(msb, 2)
            a[i, j, k] = sbox[row_index, col_index]

# Display the image
cv2.imshow('Encrypted Image', a)
cv2.waitKey(0)
cv2.destroyAllWindows()

# Save the image
cv2.imwrite('encrypted.jpg', a)
